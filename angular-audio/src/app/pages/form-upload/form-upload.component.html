<div class="container mt-5">
  <form [formGroup]="signForm" (submit)="onSubmit()" style="overflow: hidden;">
    <div class="form-group">
      <input [disabled]="isUpload" multiple id="btnFile" type="file" class="form-control-file"
        (change)="onSelectFile($event)" formControlName="file" [ngClass]="{
            'is-invalid':
              signForm.get('file').touched && signForm.get('file').invalid
          }" />
      <label for="btnFile" class="btn btn-secondary" style="cursor: pointer;">Upload file</label>
      <span class="invalid-feedback" *ngIf="signForm.get('file').touched && signForm.get('file').invalid">
        <span *ngIf="signForm.get('file').errors['required']">You must choose file</span>
        <span *ngIf="signForm.get('file').errors['isFileInvalid']">File is invalid</span>
      </span>
    </div>
    <div class="form-group">
      <table class="table table-striped table-inverse table-bordered" *ngIf="selectedFile">
        <thead class="thead-inverse">
          <tr>
            <th>Song Name</th>
            <th>Size</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let file of selectedFile">
            <td>{{file.name}}</td>
            <td>{{ formatSize(file.size/(1024*1024)) + ' MB'}}</td>
          </tr>
        </tbody>
      </table>
    </div>
    <!-- <div class="form-group">
      <input type="text" class="form-control" placeholder="Song name" formControlName="name" [ngClass]="{
          'is-invalid':
            signForm.get('name').touched && signForm.get('name').invalid
        }" />
      <span class="invalid-feedback" *ngIf="signForm.get('name').touched && signForm.get('name').invalid">
        <span *ngIf="signForm.get('name').errors['required']">Song name is required</span>
      </span>
    </div> -->
    <!-- <div class="form-group">
      <input type="text" class="form-control" placeholder="Artist" formControlName="artist" [ngClass]="{
          'is-invalid':
            signForm.get('artist').touched && signForm.get('artist').invalid
        }" />
      <span class="invalid-feedback" *ngIf="signForm.get('artist').touched && signForm.get('artist').invalid">
        <span *ngIf="signForm.get('artist').errors['required']">Artist is required</span>
      </span>
    </div> -->
    <div *ngIf="uploadResponse?.status === 'error'">
      {{ uploadResponse.message }}
    </div>
    <div class="form-group row">
      <div class="progress col-11" *ngIf="uploadResponse?.status === 'progress'" style="padding: 0;">
        <div class="progress-bar progress-bar-striped bg-success" role="progressbar"
          [style.width.%]="uploadResponse.message">
        </div>
      </div>
      <div *ngIf="uploadResponse?.status === 'progress'" class="col-1">
        <div role="progressbar" [style.width.%]="uploadResponse.message" aria-valuenow="25" aria-valuemin="0"
          aria-valuemax="100">
          {{ uploadResponse.message }}%
        </div>
      </div>
    </div>
    <button class="btn btn-success btn-block" [disabled]="signForm.invalid || signForm.status !== 'VALID'">
      Submit
    </button>
  </form>
</div>
<!-- <div *ngIf="error">
  {{ error }}
</div> -->